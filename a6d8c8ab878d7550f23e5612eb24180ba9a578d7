{
  "comments": [
    {
      "key": {
        "uuid": "5c7e9726_030e0ca0",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/Android.bp",
        "patchSetId": 17
      },
      "lineNbr": 37,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2020-01-09T06:00:44Z",
      "side": 1,
      "message": "nit: looks like an accidental tab here?",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 37,
        "endChar": 3
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58ec1c69_14a0f472",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/Android.bp",
        "patchSetId": 17
      },
      "lineNbr": 37,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-10T05:15:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5c7e9726_030e0ca0",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 37,
        "endChar": 3
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7cfdca7_55912efb",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/aes_128_gcm.cpp",
        "patchSetId": 17
      },
      "lineNbr": 35,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2020-01-09T06:00:44Z",
      "side": 1,
      "message": "Is this header authenticated? I haven\u0027t gotten to the patch where this actually gets used, but it doesn\u0027t seem like this is being sent as part of the AES-GCM associated data, which seems like the appropriate place to be authenticating this header.",
      "range": {
        "startLine": 33,
        "startChar": 15,
        "endLine": 35,
        "endChar": 20
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82d3d8d2_6dca5ff7",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/aes_128_gcm.cpp",
        "patchSetId": 17
      },
      "lineNbr": 35,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-09T16:39:54Z",
      "side": 1,
      "message": "This header struct is only being used in this file (checked in the Decrypt() method).\n\nThe cipher is fed the header.iv and header.tag, so the ssl library should be authenticating it, AFAIK. It doesn\u0027t look like I need to check anything else.",
      "parentUuid": "d7cfdca7_55912efb",
      "range": {
        "startLine": 33,
        "startChar": 15,
        "endLine": 35,
        "endChar": 20
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d90b80eb_511da6d5",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/aes_128_gcm.cpp",
        "patchSetId": 17
      },
      "lineNbr": 35,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2020-01-10T00:44:56Z",
      "side": 1,
      "message": "The field I\u0027m mostly worried about is the length: a man in the middle could arbitrarily truncate the packet without being caught by authentication. This might not be usable for an actual attack, but better safe than sorry?",
      "parentUuid": "82d3d8d2_6dca5ff7",
      "range": {
        "startLine": 33,
        "startChar": 15,
        "endLine": 35,
        "endChar": 20
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83a3783f_70610569",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/aes_128_gcm.cpp",
        "patchSetId": 17
      },
      "lineNbr": 38,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2020-01-09T06:00:44Z",
      "side": 1,
      "message": "Do we need to put this in the header? Can\u0027t this always be derived from length?",
      "range": {
        "startLine": 35,
        "startChar": 20,
        "endLine": 38,
        "endChar": 20
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f8ba6b9_89c70339",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/aes_128_gcm.cpp",
        "patchSetId": 17
      },
      "lineNbr": 38,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-09T16:39:54Z",
      "side": 1,
      "message": "Yeah, I think you\u0027re right. According to the OpenSSL docs for EVP_CIPHER_CTX_set_padding(), \"encryption operations are padded using standard block padding and the padding is checked and removed when decrypting.\" I\u0027ll verify this is actually the case in the test.",
      "parentUuid": "83a3783f_70610569",
      "range": {
        "startLine": 35,
        "startChar": 20,
        "endLine": 38,
        "endChar": 20
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0ca6a2c_60a18d3e",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/include/adbwifi/pairing/aes_128_gcm.h",
        "patchSetId": 17
      },
      "lineNbr": 36,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2020-01-09T06:00:44Z",
      "side": 1,
      "message": "Seems like this should be a constructor instead: if it fails, we should be blowing up anyway.",
      "range": {
        "startLine": 34,
        "startChar": 7,
        "endLine": 36,
        "endChar": 0
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab6197e6_53904487",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/include/adbwifi/pairing/aes_128_gcm.h",
        "patchSetId": 17
      },
      "lineNbr": 36,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-10T05:15:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f0ca6a2c_60a18d3e",
      "range": {
        "startLine": 34,
        "startChar": 7,
        "endLine": 36,
        "endChar": 0
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d3b8d5c3_405ed218",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/include/adbwifi/pairing/aes_128_gcm.h",
        "patchSetId": 17
      },
      "lineNbr": 44,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2020-01-09T06:00:44Z",
      "side": 1,
      "message": "Encrypt(..., in_len, ...)",
      "range": {
        "startLine": 43,
        "startChar": 41,
        "endLine": 44,
        "endChar": 78
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ccf7902_be3dfe6a",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/include/adbwifi/pairing/aes_128_gcm.h",
        "patchSetId": 17
      },
      "lineNbr": 44,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-10T05:15:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d3b8d5c3_405ed218",
      "range": {
        "startLine": 43,
        "startChar": 41,
        "endLine": 44,
        "endChar": 78
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "631e021f_e4ed42b6",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/include/adbwifi/pairing/aes_128_gcm.h",
        "patchSetId": 17
      },
      "lineNbr": 68,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2020-01-09T06:00:44Z",
      "side": 1,
      "message": "Google C++ style prescribes foo_ instead of mFoo",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 68,
        "endChar": 37
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec2aec15_a1d1bfce",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/include/adbwifi/pairing/aes_128_gcm.h",
        "patchSetId": 17
      },
      "lineNbr": 68,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-10T05:15:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "631e021f_e4ed42b6",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 68,
        "endChar": 37
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f098291a_94ad8305",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/include/adbwifi/pairing/counter.h",
        "patchSetId": 17
      },
      "lineNbr": 43,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2020-01-09T06:00:44Z",
      "side": 1,
      "message": "nit: counter_",
      "range": {
        "startLine": 43,
        "startChar": 12,
        "endLine": 43,
        "endChar": 19
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a82872c1_69d1b5ca",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/include/adbwifi/pairing/counter.h",
        "patchSetId": 17
      },
      "lineNbr": 43,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-10T05:15:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f098291a_94ad8305",
      "range": {
        "startLine": 43,
        "startChar": 12,
        "endLine": 43,
        "endChar": 19
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9c2d96eb_dce19e94",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/include/adbwifi/pairing/pairing_auth.h",
        "patchSetId": 17
      },
      "lineNbr": 29,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2020-01-09T06:00:44Z",
      "side": 1,
      "message": "exchange",
      "range": {
        "startLine": 29,
        "startChar": 34,
        "endLine": 29,
        "endChar": 43
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc3f4d37_242f1257",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/include/adbwifi/pairing/pairing_auth.h",
        "patchSetId": 17
      },
      "lineNbr": 29,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-10T05:15:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9c2d96eb_dce19e94",
      "range": {
        "startLine": 29,
        "startChar": 34,
        "endLine": 29,
        "endChar": 43
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "56489e61_a18592f9",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/libadbwifi_pairing_auth.map.txt",
        "patchSetId": 17
      },
      "lineNbr": 4,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2020-01-09T06:00:44Z",
      "side": 1,
      "message": "Unfortunately, if this is in the adbd apex and loaded from the system (or in the system and loaded from the adbd apex), the API is going to need to be an ugly C wrapper around the C++ implementation because of ABI stability reasons (e.g. there are libc++ ABI breakages in std::string that we actively want to take right now).\n\n(and if not, presumably this shouldn\u0027t be labeled apex)",
      "range": {
        "startLine": 3,
        "startChar": 18,
        "endLine": 4,
        "endChar": 48
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5400dccb_2b15e082",
        "filename": "libs/adbd_auth/adbwifi_libs/pairing_auth/libadbwifi_pairing_auth.map.txt",
        "patchSetId": 17
      },
      "lineNbr": 4,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2020-01-09T16:39:54Z",
      "side": 1,
      "message": "Ahh, that sucks ðŸ˜ž. I\u0027ll go ahead and add C wrappers for this CL and the other one.",
      "parentUuid": "56489e61_a18592f9",
      "range": {
        "startLine": 3,
        "startChar": 18,
        "endLine": 4,
        "endChar": 48
      },
      "revId": "a6d8c8ab878d7550f23e5612eb24180ba9a578d7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}